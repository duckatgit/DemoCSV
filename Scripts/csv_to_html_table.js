var CsvToHtmlTable = CsvToHtmlTable || {}; CsvToHtmlTable = { init: function (a) { var c = (a = a || {}).csv_path || "", b = a.element || "table-container", g = a.allow_download || !1, h = a.csv_options || {}, i = a.datatables_options || {}, d = a.custom_formatting || [], j = {}; $.each(d, function (d, a) { var b = a[0], c = a[1]; j[b] = c }); var e = $("<table class='table table-striped table-condensed' id='" + b + "-table'></table>"), f = $("#" + b); f.empty().append(e), $.when($.get(c)).then(function (s) { for (var a = $.csv.toArrays(s, h), m = $("<thead></thead>"), n = a[0], o = $("<tr></tr>"), k = 0; k < n.length; k++)o.append($("<th></th>").text(n[k])); m.append(o), e.append(m); for (var p = $("<tbody></tbody>"), b = 1; b < a.length; b++)for (var q = $("<tr></tr>"), d = 0; d < a[b].length; d++) { var l = $("<td></td>"), r = j[d]; r ? l.html(r(a[b][d])) : l.text(a[b][d]), q.append(l), p.append(q) } e.append(p), e.DataTable(i), g && f.append("<p><a class='btn btn-info' href='" + c + "'><i class='glyphicon glyphicon-download'></i> Download as CSV</a></p>") }) } }